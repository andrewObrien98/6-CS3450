<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Accepted Jobs</title>
    {% load static %}
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'moneyLawndering/style.css' %}">
</head>

<body class="normal-page-background">
    <header>
        <div class="navBar">
            {% if user.type == 0 %}
                <div class="navBarBox">Welcome to Money Lawndering!</div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:account' %}"><div>Account</div></a> </div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:publicListing' %}"><div>Public Listings</div></a> </div>
                <div class="selectedNavBarBox"> Accepted Jobs </div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:history' %}"><div>History</div></a> </div>
            {% elif user.type == 1 %}
                <div class="navBarBox">Welcome to Money Lawndering!</div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:account' %}"><div>Account</div></a> </div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:myListing' %}"><div>Your Listings</div></a> </div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:createListing' %}"><div>New Listing</div></a> </div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:directTransfer' %}"><div>Direct Transfer</div></a> </div>
                <div class="navBarBox"> <a href="{% url 'moneyLawndering:history' %}"><div>History</div></a> </div>
            {% endif %}
        </div>
    </header>
    <div class="listingsPage">
    <div class="listingStatusList listingsScroll">
        <div class="centered">Applied for Jobs: </div>
        <ul>
        {% for listing in pendingListings %}
            <li class="listing">
                <h2>{{listing.category|capfirst}}</h2>
                <h3>${{listing.price|floatformat:"-2g"}}</h3>
                <div>
                    <h3>Description: </h3>{{listing.description|capfirst}}
                    {% if listing.time_est == 1.0 %}
                        <p>It'll probably take about 1 hour.</p>
                    {% else %}
                        <p>It'll probably take about {{listing.time_est|floatformat:"-1g"}} hours.</p>
                    {% endif %}
                </div>
                <div><h3>When: </h3>{{listing.dayOfWeek|capfirst}} between {{listing.startTimeOfDay}} and {{listing.endTimeOfDay}}</div>
                <div><h3>Who: </h3>{{listing.customer.name|capfirst}}</div>
                <div><h3>Where: </h3>{{listing.location|capfirst}}</div>
            </li>
        {% endfor %}
        </ul>
    </div>

    <div class="listingStatusList listingsScroll">
    <div class="centered">Accepted Jobs: </div>

    {% for listing in acceptedListings %}
        {% if listing.status != 4 %}
            <div>{{listing.customer.name}}</div>
            <form action="{% url 'moneyLawndering:completedJob' listing.id %}" method="post">
                {% csrf_token %}
                {{ form }}
                <label for="category">Choose a category:</label>
                <select name="rating" id="rating">
                    <option value={{1}}> 1 star</option>
                    <option value={{2}}> 2 star</option>
                    <option value={{3}}> 3 star</option>
                    <option value={{4}}> 4 star</option>
                    <option value={{5}}> 5 star</option>
                </select> <br>


                <label for="review">Description of Job:</label>
                <textarea id="review" name="review" rows="4" cols="50"></textarea> <br>

                <input type="submit"  value="Job Completed"><br>
            </form>
        {% endif %}
    {% endfor %}
    </div>

    <div class="listingStatusList listingsScroll">
        <div class="centered">Completed Jobs: </div>
        {% for listing in completedListings %}
             <li class="listing">
                <h2>{{listing.category|capfirst}}</h2>
                <h3>${{listing.price|floatformat:"-2g"}}</h3>
                <div>
                    <h3>Description: </h3>{{listing.description|capfirst}}
                    {% if listing.time_est == 1.0 %}
                        <p>It'll probably take about 1 hour.</p>
                    {% else %}
                        <p>It'll probably take about {{listing.time_est|floatformat:"-1g"}} hours.</p>
                    {% endif %}
                </div>
                <div><h3>When: </h3>{{listing.dayOfWeek|capfirst}} between {{listing.startTimeOfDay}} and {{listing.endTimeOfDay}}</div>
                <div><h3>Who: </h3>{{listing.customer.name|capfirst}}</div>
                <div><h3>Where: </h3>{{listing.location|capfirst}}</div>
            </li>
        {% endfor %}
        </div>
    </div>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>